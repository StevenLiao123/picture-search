(this["webpackJsonppicture-search"]=this["webpackJsonppicture-search"]||[]).push([[0],{195:function(e,t,a){e.exports=a(395)},200:function(e,t,a){},286:function(e,t,a){},361:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),i=a.n(o),c=a(55),s=(a(200),a(51)),l=a(21),u=a.n(l),p=a(44),m=a(31),h=a(32),d=a(34),f=a(35),v=a(402),g=a(397),b=a(401),E=a(50),y=a(33),O=a(162),j=a.n(O),P=function(e,t,a){return j.a.get("".concat("https://www.flickr.com/services/rest","/?method=flickr.photos.search&api_key=").concat("f136c1c40756c802a408d7e11ce99ffa","&lat=").concat(e,"&lon=").concat(t,"&per_page=10&page=").concat(a,"&format=json&nojsoncallback=1"))},w=a(99),T=a.n(w),k=function(e){T.a.set("data_key",e)},S=function(){return T.a.get("data_key")||{}},L=function(){T.a.remove("data_key")},_=function(e){return{type:"SET_LATITUDE",lat:e}},C=function(e){return{type:"SET_LONGTITUDE",lon:e}},D=function(e){return{type:"RECEIVE_PHOTOS_DATA",data:e}},A=function(e,t,a){return function(){var n=Object(p.a)(u.a.mark((function n(r){var o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(e,t,a);case 2:(o=n.sent)?(i=o.data,k(i),v.a.success("receive photos data successful!"),r(D(i))):v.a.error(o.data.message);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},x=(a(286),{labelCol:{span:6},wrapperCol:{span:12}}),I={wrapperCol:{offset:6,span:12}},F=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.receivePhotosData(a.lat,a.lon,1),e.props.setLatitudeValue(a.lat),e.props.setLongtitudeValue(a.lon);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(g.a,Object.assign({},x,{name:"basic",initialValues:{remember:!0},onFinish:t,onFinishFailed:function(e){v.a.error("Please input the right latitude and longtitude!")},className:"search-by-coordinate"}),r.a.createElement(g.a.Item,{label:"Latitude",name:"lat",rules:[{required:!0,message:"Please input latitude!"}]},r.a.createElement(b.a,{type:"number"})),r.a.createElement(g.a.Item,{label:"Longtitude",name:"lon",rules:[{required:!0,message:"Please input longtitude!"}]},r.a.createElement(b.a,{type:"number"})),r.a.createElement(g.a.Item,I,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Search")))}}]),a}(n.Component);var N=Object(y.b)(null,(function(e){return{setLatitudeValue:function(t){return e(_(t))},setLongtitudeValue:function(t){return e(C(t))},receivePhotosData:function(t,a,n){return e(A(t,a,n))}}}))(F),V=a(400),M=a(399),R=[{name:"Sydney",lat:-33.8548157,lon:151.2164539},{name:"Brisbane",lat:-27.4689682,lon:153.0234991},{name:"Perth",lat:-31.9527121,lon:115.8604796},{name:"Melbourne",lat:37.8136,lon:144.9631},{name:"Adelaide",lat:34.9285,lon:138.6007}],B={labelCol:{span:6},wrapperCol:{span:12}},q={wrapperCol:{offset:6,span:12}},H=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={location:{}},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(g.a,Object.assign({},B,{name:"basic",initialValues:{remember:!0},onFinishFailed:function(e){v.a.error("Please input the name, latitude and longtitude!")},onFinish:function(t){e.setState({location:t},(function(){e.props.getLocation(e.state.location)}))}}),r.a.createElement(g.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"}]},r.a.createElement(b.a,{type:"string"})),r.a.createElement(g.a.Item,{label:"Latitude",name:"lat",rules:[{required:!0,message:"Please input latitude!"}]},r.a.createElement(b.a,{type:"number"})),r.a.createElement(g.a.Item,{label:"Longtitude",name:"lon",rules:[{required:!0,message:"Please input longtitude!"}]},r.a.createElement(b.a,{type:"number"})),r.a.createElement(g.a.Item,q,r.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Confirm")))}}]),a}(n.Component),U=(a(361),V.a.Option),G={labelCol:{span:6},wrapperCol:{span:12}},W={wrapperCol:{offset:6,span:12}},J=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getOptions=function(e){return e.map((function(e){return r.a.createElement(U,{key:e.name||null,value:e.name},e.name)}))},n.showAddModal=function(){n.setState({showModalStatus:1})},n.isEmptyObject=function(e){for(var t in e)return!1;return!0},n.addLocation=function(){n.isEmptyObject(n.state.location)?v.a.error("Please press confirm button first!"):(R.push(n.state.location),n.options=n.getOptions(R),n.setState({showModalStatus:0}))},n.handleCancel=function(){n.setState({showModalStatus:0})},n.getLocation=function(e){n.setState({location:e})},n.state={location:{},showModalStatus:0},n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){this.options=this.getOptions(R)}},{key:"render",value:function(){var e=this,t=this.state.showModalStatus,a=function(){var t=Object(p.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=R.find((function(e){return e.name===a.location})),e.props.receivePhotosData(n.lat,n.lon,1),e.props.setLatitudeValue(n.lat),e.props.setLongtitudeValue(n.lon);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(g.a,Object.assign({},G,{name:"basic",initialValues:{remember:!0},onFinish:a,onFinishFailed:function(e){v.a.error("Please input the right location!")},className:"search-by-location"}),r.a.createElement(g.a.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please input location!"}]},r.a.createElement(V.a,null,this.options)),r.a.createElement(g.a.Item,W,r.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{marginRight:"15px",marginBottom:"15px"}},"Search"),r.a.createElement(E.a,{type:"primary",onClick:this.showAddModal},"Add location")),r.a.createElement(M.a,{title:"Add a location",visible:1===t,onOk:this.addLocation,onCancel:this.handleCancel},r.a.createElement(H,{getLocation:this.getLocation})))}}]),a}(n.Component);var $=Object(y.b)(null,(function(e){return{setLatitudeValue:function(t){return e(_(t))},setLongtitudeValue:function(t){return e(C(t))},receivePhotosData:function(t,a,n){return e(A(t,a,n))}}}))(J),z=(a(378),function(){return r.a.createElement("div",{className:"search-area"},r.a.createElement("h1",null,"Search Area"),r.a.createElement("div",{className:"search-area-forms"},r.a.createElement(N,null),r.a.createElement($,null)))}),K=a(29),Q=a(398),X=a(73),Y=(a(379),function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).addPhotoToList=function(e){n.props.addPhotosToFavouritesList(e),v.a.success("Save to favourist list!")},n.getCard=function(){return n.props.photosData.photos.photo.map((function(e){return r.a.createElement(K.a,{md:12,xs:24,key:e.id},r.a.createElement(Q.a,{hoverable:!0,title:e.title,bordered:!1,style:{marginBottom:"10px",textAlign:"center"},cover:r.a.createElement("img",{alt:e.title,src:"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_b.jpg")})},r.a.createElement(E.a,{type:"primary",onClick:function(){return n.addPhotoToList(e)}},"Add to list")))}))},n.isEmptyObject=function(e){for(var t in e)return!1;return!0},n.getNextPage=Object(p.a)(u.a.mark((function e(){var t,a,r,o,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,a=t.latitude,r=t.longtitude,o=t.photosData,i=n.state.page,c=i,s=n.isEmptyObject(o)?null:o.photos.pages,c<=s?(c+=1,n.setState({page:c},(function(){return n.props.receivePhotosData(a,r,i)}))):v.a.error("Sorry, no more images for this position.");case 5:case"end":return e.stop()}}),e)}))),n.resetPhotos=function(){n.props.resetPhotos()},n.state={page:2},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.photosData,t="ok"===e.stat?e.photos.photo:{};return r.a.createElement("div",{className:"gallery"},r.a.createElement("h1",null,"Gallery"),r.a.createElement("div",{className:"gallery-reset-list"},this.isEmptyObject(e)?null:r.a.createElement(E.a,{type:"link",onClick:this.resetPhotos},"Reset photo"),r.a.createElement(c.b,{to:"/favourites-list"},"Favourites-list ->")),r.a.createElement("div",{className:"gallery-next-page"},this.isEmptyObject(e)?null:r.a.createElement(E.a,{type:"link",onClick:this.getNextPage},"Next page")),r.a.createElement(X.a,{gutter:16},0!==t.length&&"ok"===e.stat?this.getCard():r.a.createElement(K.a,{lg:8,md:12,xs:24},r.a.createElement("h1",null,"Sorry, no images for this position."))))}}]),a}(n.Component));var Z=Object(y.b)((function(e){return{latitude:e.Latitude,longtitude:e.Longtitude,photosData:e.PhotosData}}),(function(e){return{receivePhotosData:function(t,a,n){return e(A(t,a,n))},addPhotosToFavouritesList:function(t){return e(function(e){return{type:"ADD_PHOTOS_TO_FAVOURITES_LIST",photo:e}}(t))},resetPhotos:function(){return e((L(),{type:"RESET_PHOTOS_DATA"}))}}}))(Y),ee=(a(392),function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getCard=function(){return n.props.favouritesPhoto.photos.map((function(e){return r.a.createElement(K.a,{md:12,xs:24,key:e.id},r.a.createElement(Q.a,{hoverable:!0,title:e.title,bordered:!1,style:{marginBottom:"10px"},cover:r.a.createElement("img",{alt:e.title,src:"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_b.jpg")})}))}))},n.state={photos:[]},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"favourites-list"},r.a.createElement("h1",null,"Favourites list"),r.a.createElement("div",{className:"back-to-gallery"},r.a.createElement(c.b,{to:"/gallery"}," Back to Gallery")),r.a.createElement(X.a,{gutter:16},0!==this.props.favouritesPhoto.photos.length?this.getCard():r.a.createElement(K.a,{lg:8,md:12,xs:24,style:{textAlign:"center"}},r.a.createElement("h1",null,"Sorry, no images for this position."))))}}]),a}(n.Component));var te=Object(y.b)((function(e){return{favouritesPhoto:e.FavouritesPhotos}}))(ee),ae=(a(393),function(){return r.a.createElement("div",{className:"app"},r.a.createElement(z,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:Z}),r.a.createElement(s.b,{path:"/favourites-list",component:te}),r.a.createElement(s.a,{to:"/"})))}),ne=a(45),re=a(185),oe=a(186),ie=a(189),ce=a(192);var se=S();var le={photos:[]};var ue=Object(ne.combineReducers)({Latitude:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-33.8548157,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LATITUDE":return t.lat;default:return e}},Longtitude:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:151.2164539,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LONGTITUDE":return t.lon;default:return e}},PhotosData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PHOTOS_DATA":return t.data;case"RESET_PHOTOS_DATA":return{};default:return e}},FavouritesPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PHOTOS_TO_FAVOURITES_LIST":return Object(ce.a)({},e,{photos:[].concat(Object(ie.a)(e.photos),[t.photo])});default:return e}}}),pe=Object(ne.createStore)(ue,Object(re.composeWithDevTools)(Object(ne.applyMiddleware)(oe.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(394);i.a.render(r.a.createElement(y.a,{store:pe},r.a.createElement(c.a,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[195,1,2]]]);
//# sourceMappingURL=main.edbd9038.chunk.js.map